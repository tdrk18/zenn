---
title: "Perlã§æ—¥ä»˜ã®å·®åˆ†ã‚’æ±‚ã‚ã‚‹"
emoji: "ğŸ“†"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["perl"]
published: false
---

ï¼’ã¤ã® DateTime ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã€ãã®å·®ã‚’æ±‚ã‚ã‚‹æ–¹æ³•ã€‚
ç°¡å˜ã«æ±‚ã¾ã‚‹ã‹ã¨æ€ã£ãŸã‚‰ã¡ã‚‡ã£ã¨ãƒãƒã£ãŸã®ã§ãƒ¡ãƒ¢ã€‚

# DateTimeã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½¿ã„æ–¹

ã¾ãšã¯ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä½¿ã„æ–¹ã‚’ã€‚

```perl
use strict;
use DateTime;

my $dt1 = DateTime->new(year => 2016, month => 9, day => 1);
my $dt2 = DateTime->today;

print "$dt1\n";   #=> 2016-09-01T00:00:00
print "$dt2\n";   #=> 2016-10-18T00:00:00
```

# ï¼’ã¤ã®æ—¥ä»˜ã®å·®

ï¼’ã¤ã®æ—¥ä»˜ã®å·®ã®æ—¥æ•°ã‚’æ±‚ã‚ãŸã„ã®ã§ã€ `$dt2` ã‹ã‚‰ `$dt1` ã‚’å¼•ãç®—ã—ã¦ã‚„ã‚‹ã€‚
DateTime ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆåŒå£«ã®å·®ã¯ DateTime::Duration ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦è¿”ã£ã¦ãã‚‹ã€‚
ä¸Šã®ã‚³ãƒ¼ãƒ‰ã®ç¶šãã«ã“ã†ã‚„ã£ã¦æ›¸ãã€‚

```perl
my $duration = $dt2 - $dt1;
print $duration->delta_days . "\n";   #=> 17
```

ã‚ã‚Œï¼Ÿ `17` ã£ã¦ä½•ï¼Ÿ
ï¼‘ãƒ¶æœˆã©ã“è¡Œã£ãŸï¼Ÿ

## ãªãœã“ã®ã‚ˆã†ã«ãªã‚‹ã®ã‹
ã¨ã„ã†ã®ã¯ã€DateTime::Duration ã®ä»•æ§˜ã®ã‚ˆã†ã€‚

```perl
use Data::Dumper;
print Dumper($duration);
```

ã¨ã—ã¦ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã€‚

```
$VAR1 = bless( {
'seconds' => 0,
'minutes' => 0,
'end_of_month' => 'wrap',
'nanoseconds' => 0,
'days' => 17,
'months' => 1
}, 'DateTime::Duration' );
```

ã¨ã€ã€Œï¼‘ãƒ¶æœˆã¨ï¼‘ï¼—æ—¥ã€ã¨ã„ã†å½¢ã§å€¤ã‚’æŒã£ã¦ã„ã‚‹ã€‚
ï¼‘ãƒ¶æœˆãŒä½•æ—¥ã§ã‚ã‚‹ã‹ã¯æœˆã«ã‚ˆã£ã¦ç•°ãªã‚‹ãŸã‚ã€ãƒˆãƒ¼ã‚¿ãƒ«ã§ä½•æ—¥ãªã®ã‹ã‚’è¨ˆç®—ã§ããªã„ã¨ã®ã“ã¨ï¼ˆã™ã”ã„è¨€ã„è¨³ã ...ï¼‰ã€‚

## æ­£ã—ã„æ—¥ä»˜å·®åˆ†ã®æ±‚ã‚æ–¹

`delta_days` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ï¼

```perl
my $delta = $dt2->delta_days($dt1);
print $delta->delta_days . "\n";   #=> 47
```

ã¨ã„ã†æ„Ÿã˜ã§æ­£ã—ãå·®åˆ†ã®ã€Œ47ã€æ—¥ãŒå¾—ã‚‰ã‚Œã‚‹ã€‚

---

Copy from https://qiita.com/tdrk/items/35cadbf5bb757c0eb605
