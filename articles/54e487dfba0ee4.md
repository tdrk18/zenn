---
title: "Android ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‹ã‚‰ localhost ã«æ¥ç¶šã™ã‚‹"
emoji: "ğŸ’»"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["android"]
published: true
---

# Android ã‚¢ãƒ—ãƒªã‹ã‚‰ localhost ã«æ¥ç¶šã™ã‚‹
ãƒ­ãƒ¼ã‚«ãƒ« PC ã§é–‹ç™ºã—ã¦ã„ã‚‹ã‚µãƒ¼ãƒã«å¯¾ã—ã¦ã€ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ä¸Šã® Android ã‚¢ãƒ—ãƒªã‹ã‚‰ HTTP æ¥ç¶šã‚’ã™ã‚‹ã€‚

## localhost ã‚’å‘ã‘ã‚‹ãŸã‚ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¨­å®šã™ã‚‹
`http://10.0.2.2` ã‚’ä½¿ã†ã€‚

https://developer.android.com/studio/run/emulator-networking
>| Network Address | Description |
>| --- | --- |
>| 10.0.2.2 | Special alias to your host loopback interface (127.0.0.1 on your development machine) |

## ã‚¢ãƒ—ãƒªã‹ã‚‰ HTTP é€šä¿¡ã‚’è¨±å¯ã™ã‚‹
Android 9.0 ä»¥é™ã€é SSL é€šä¿¡ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è¨±å¯ã•ã‚Œãªããªã£ãŸã€‚
localhost ã§é–‹ç™ºã™ã‚‹å ´åˆã€https ã«ã™ã‚‹ã®ã¯ã‚³ã‚¹ãƒˆãŒé«˜ã„ã®ã§ã€http ã®ã¾ã¾é€šä¿¡ãŒã—ãŸããªã‚‹ã€‚
ã‚¢ãƒ—ãƒªã‹ã‚‰ç‰¹å®šã® URL ã«å¯¾ã—ã¦é SSL é€šä¿¡ãŒè¡Œãˆã‚‹ã‚ˆã†ã«è¨­å®šã™ã‚‹ã€‚

1. `res/xml/network_security_config.xml` ã‚’ä½œæˆã™ã‚‹ã€‚
    ```xml
    <network-security-config>
      <domain-config cleartextTrafficPermitted="true">
        <domain includeSubdomains="true">10.0.2.2</domain>
      </domain-config>
    </network-security-config>
    ```

1. `AndroidManifest.xml` ã« network_security_config ã‚’æŒ‡å®šã™ã‚‹ã€‚
    https://developer.android.com/training/articles/security-config#manifest
    ```xml
    <application
        ...
        android:networkSecurityConfig="@xml/network_security_config">
        ...
    </application>
    ```